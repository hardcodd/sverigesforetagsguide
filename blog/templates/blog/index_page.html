{% extends "base.html" %}

{% block body_class %}template-blog-index-page{% endblock %}

{% load i18n core blog authors %}

{% block content %}
  <div class="container">
    <div class="row v-gutters">
      <div class="col-lg-9 col-12">
        <h1 class="page__title">{{ page.title|mark|safe }}</h1>

        {% if request.GET.author %}
          {% get_author_by_slug request.GET.author as author %}
          {% trans "[[By author]]: "|add:author.title as section_title %}
          {% include "includes/section-header.html" %}
        {% elif request.GET.tag %}
          {% get_tag_by_slug request.GET.tag as tag %}
          {% trans "[[By tag]]: "|add:tag.tag.name as section_title %}
          {% include "includes/section-header.html" %}
        {% endif %}
        {% if page.subtitle %}<h2 class="page__subtitle">{{ page.subtitle }}</h2>{% endif %}

        <div class="posts-list">
          <div class="row v-gutters">
            {% get_paginated_blog_posts page as posts %}
            {% for post in posts %}
              <div class="col-xl-4 col-md-6 col-12">{% include "blog/includes/post-item.html" %}</div>
            {% endfor %}
          </div>
        </div>

        {% include "includes/pagination.html" with page_obj=posts %}
      </div>

      <div class="col-lg-3 col-12">
        <div class="sidebar">{% include "blog/includes/sidebar.html" %}</div>
      </div>
    </div>
  </div>
{% endblock content %}
